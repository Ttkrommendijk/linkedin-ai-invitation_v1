<!doctype html>
<html>
    <head>
        <meta charset="UTF-8" />
        <link rel="stylesheet" href="popup.css" />
    </head>
    <body>
        <div class="tabs">
            <button id="tabMainBtn" class="tab-btn active" type="button">
                Invitation
            </button>
            <button id="tabMessageBtn" class="tab-btn" type="button">
                Message
            </button>
            <button id="tabConfigBtn" class="tab-btn" type="button">
                Config
            </button>
        </div>

        <div id="tabMain" class="tab-panel active">
            <div class="row">
                <small
                    >Profile context sent to AI
                    <button id="toggleProfileContextPreview" type="button">
                        Show
                    </button></small
                >
                <div id="profileContextPreviewWrap">
                    <pre id="profileContextPreview">{}</pre>
                </div>
            </div>

            <div class="row">
                <label
                    ><small
                        >Specific focus for this profile (optional)</small
                    ></label
                >
                <input
                    id="focus"
                    placeholder="e.g. S&OP + Slimstock + SAP S/4HANA go-live"
                />
            </div>

            <button id="generate" type="button">Generate invite</button>
            <button id="openSidePanel" type="button">Open side panel</button>

            <div class="row inline">
                <button id="markInvited" type="button">Invitation sent</button>
                <button id="markAccepted" type="button">
                    Invitation accepted
                </button>
            </div>
            <div id="invitedAtLabel" hidden>
                <small></small>
            </div>
            <div id="acceptedAtLabel" hidden>
                <small></small>
            </div>

            <div class="row">
                <small>Status</small>
                <div id="status">Idle</div>
            </div>

            <div class="row">
                <small>Preview</small>
                <pre id="preview"></pre>
            </div>
            <button id="copyBtn" type="button">Copy</button>
        </div>

        <div id="tabMessage" class="tab-panel">
            <div class="row">
                <label
                    ><small
                        >Message prompt
                        <button
                            id="toggleMessagePrompt"
                            type="button"
                            aria-expanded="false"
                        >
                            Show prompt
                        </button></small
                    ></label
                >
                <div id="messagePromptWrap">
                    <textarea id="messagePrompt">
Escreva a melhor primeira mensagem apos aceitar conexao no LinkedIn, em portugues.
Objetivo estrategico: abrir uma conversa com friccao minima e incentivar resposta curta.

Regras obrigatorias:
1. Agradeca por aceitar a conexao.
2. Cite uma referencia factual especifica do perfil (empresa, cargo, area de atuacao, etc).
3. Mantenha tom peer-level, neutro, especifico e nao comercial.
4. Nao faca pitch de servicos.
5. Nao elogie excessivamente.
6. Nao use adjetivos emocionais.
7. Nunca invente fatos; use apenas profile_context e profile_excerpt_fallback.

Estrutura:
- Maximo 2 paragrafos curtos.
- O segundo paragrafo deve conter:
  - Uma observacao afirmativa leve sobre o contexto profissional da pessoa.
  - Uma pergunta simples de validacao, que possa ser respondida com sim/nao ou frase curta.
  - Evite perguntas amplas, reflexivas ou que exijam explicacoes longas.

Evitar completamente:
- "quais foram os aprendizados"
- "como voce enxerga"
- "poderia compartilhar"
- perguntas profundas ou conceituais
- convite direto para reuniao
- emojis, hashtags ou bullets

A pergunta final deve reduzir friccao e facilitar resposta rapida. Sem emojis, hashtags ou bullets. Nunca invente fatos; use somente profile_context e profile_excerpt_fallback.</textarea
                    >
                    <div class="inline">
                        <button id="saveMessagePrompt" type="button">
                            Save prompt
                        </button>
                        <button id="resetMessagePrompt" type="button">
                            Reset to default
                        </button>
                    </div>
                </div>
            </div>

            <button id="generateFirstMessage" type="button">
                Generate first message
            </button>

            <div class="row">
                <small>Status</small>
                <div id="messageStatus">Idle</div>
            </div>

            <div class="row">
                <small>First message preview</small>
                <pre id="firstMessagePreview"></pre>
            </div>

            <button id="copyFirstMessage" type="button">Copy</button>
            <button id="markMessageSent" type="button">Message sent</button>
        </div>

        <div id="tabConfig" class="tab-panel">
            <div class="row">
                <label><small>OpenAI API key (saved)</small></label>
                <input id="apiKey" type="password" placeholder="sk-..." />
            </div>

            <div class="row">
                <label><small>Model (saved)</small></label>
                <input id="model" placeholder="gpt-4.1" />
            </div>

            <div class="row">
                <label><small>Strategy (saved)</small></label>
                <textarea
                    id="strategy"
                    placeholder="Paste your strategy core here (saved)."
                ></textarea>
            </div>

            <div class="row">
                <label><small>Webhook base URL (saved)</small></label>
                <input
                    id="webhookBaseUrl"
                    placeholder="https://yourdomain.com"
                />
            </div>

            <div class="row">
                <label><small>Webhook secret (saved)</small></label>
                <input
                    id="webhookSecret"
                    type="password"
                    placeholder="shared secret"
                />
            </div>

            <button id="saveConfig" type="button">Save config</button>

            <div class="row">
                <small>Tip</small>
                <div>
                    <small
                        >Edits are saved when you click "Save config" or
                        "Generate".</small
                    >
                </div>
            </div>
        </div>

        <div id="lifecycleBar" class="lifecycle-bar">
            <span id="lifecycleBarText"></span>
        </div>

        <script src="popup.js"></script>
    </body>
</html>
